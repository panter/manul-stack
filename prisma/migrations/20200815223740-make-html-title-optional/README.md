# Migration `20200815223740-make-html-title-optional`

This migration has been generated by Marco Wettstein at 8/16/2020, 12:37:40 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "new_Page" (
"id" TEXT NOT NULL,
"published" BOOLEAN  DEFAULT false,
"createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
"path" TEXT ,
"slug" TEXT NOT NULL,
"sortKey" INTEGER  DEFAULT 100,
"parentPageId" TEXT ,
"navigationTitle_en" TEXT NOT NULL,
"navigationTitle_de" TEXT ,
"htmlTitle_en" TEXT ,
"htmlTitle_de" TEXT ,
"content" TEXT ,
"meta_description_en" TEXT ,
"meta_description_de" TEXT ,
"social_description_en" TEXT ,
"social_description_de" TEXT ,
"social_title_en" TEXT ,
"social_title_de" TEXT ,
PRIMARY KEY ("id"),
FOREIGN KEY ("parentPageId") REFERENCES "Page"("id") ON DELETE SET NULL ON UPDATE CASCADE
)

INSERT INTO "new_Page" ("id", "published", "createdAt", "path", "slug", "sortKey", "parentPageId", "navigationTitle_en", "navigationTitle_de", "htmlTitle_en", "htmlTitle_de", "content", "meta_description_en", "meta_description_de", "social_description_en", "social_description_de", "social_title_en", "social_title_de") SELECT "id", "published", "createdAt", "path", "slug", "sortKey", "parentPageId", "navigationTitle_en", "navigationTitle_de", "htmlTitle_en", "htmlTitle_de", "content", "meta_description_en", "meta_description_de", "social_description_en", "social_description_de", "social_title_en", "social_title_de" FROM "Page"

PRAGMA foreign_keys=off;
DROP TABLE "Page";;
PRAGMA foreign_keys=on

ALTER TABLE "new_Page" RENAME TO "Page";

CREATE UNIQUE INDEX "Page.path_unique" ON "Page"("path")

CREATE UNIQUE INDEX "Page.parentPageId_slug_unique" ON "Page"("parentPageId","slug")

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200814214144-add-pages..20200815223740-make-html-title-optional
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
     provider = "sqlite"
-    url = "***"
+    url = "***"
 }
 generator prisma_client {
     provider = "prisma-client-js"
@@ -41,9 +41,9 @@
     childPages         Page[]   @relation("parentChild")
     navigationTitle_en String
     navigationTitle_de String?
-    htmlTitle_en String
+    htmlTitle_en String?
     htmlTitle_de String?
     content             String? // is multilang already
     meta_description_en String?
```


