# Migration `20200812150112-add-user-roles`

This migration has been generated by Marco Wettstein at 8/12/2020, 5:01:12 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."UserRole" (
"id" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."_UserToUserRole" (
"A" text  NOT NULL ,
"B" text  NOT NULL )

CREATE UNIQUE INDEX "_UserToUserRole_AB_unique" ON "public"."_UserToUserRole"("A","B")

CREATE  INDEX "_UserToUserRole_B_index" ON "public"."_UserToUserRole"("B")

ALTER TABLE "public"."_UserToUserRole" ADD FOREIGN KEY ("A")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."_UserToUserRole" ADD FOREIGN KEY ("B")REFERENCES "public"."UserRole"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200812123556-add-password..20200812150112-add-user-roles
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url = "***"
 }
 generator prisma_client {
     provider = "prisma-client-js"
@@ -15,10 +15,16 @@
     userId      String
     published   Boolean @default(false)
 }
+model UserRole {
+    id    String @id
+    users User[]
+}
+
 model User {
     id        String     @default(uuid()) @id
     email     String     @unique
     password  String
     blogPosts BlogPost[]
+    roles     UserRole[]
 }
```


